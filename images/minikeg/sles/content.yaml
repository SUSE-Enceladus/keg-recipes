image:
  profiles:
    profile:
      - _attributes:
          name: Azure-Basic
          description: Azure Guest Image
      - _attributes:
          name: Azure-Standard
          description: Azure Guest Image
      - _attributes:
          name: EC2
          description: EC2 Guest Image
      - _attributes:
          name: GCE
          description: GCE Guest Image
  preferences:
    - _include: base/common
    - _attributes:
        profiles: Azure-Basic
      _include: csp/azure
    - _attributes:
        profiles: Azure-Standard
        arch: aarch64
      _include: csp/azure/aarch64
    - _attributes:
        profiles: Azure-Standard
        arch: x86_64
      _include: csp/azure/x86_64
    - _attributes:
        profiles: EC2
      _include: csp/ec2
    - _attributes:
        profiles: GCE
      _include: csp/gce
  packages:
    - _attributes:
       type: bootstrap
      _include:
        - base/bootstrap
    - _attributes:
        type: image
      _include:
        - base/common
        - base/sle
        - base/sle-modules
        - products/sles/ondemand
    - _attributes:
        type: image
        profiles: Azure-Basic,Azure-Standard
      _include:
        - csp/azure
      archive:
        - _attributes:
            name: azure.tar.gz
    - _attributes:
        type: image
        profiles: EC2
      _include:
        - csp/ec2
      archive:
        - _attributes:
            name: ec2.tar.gz
    - _attributes:
        type: image
        profiles: GCE
      _include:
        - csp/gce
      archive:
        - _attributes:
            name: gce.tar.gz
config:
  - _include:
      - base/common
      - products/sles/ondemand
  - profiles: [Azure-Basic, Azure-Standard]
    _include:
      - csp/azure
  - profiles: [Azure-Basic]
    _include:
      - settings/sles/azure-basic
  - profiles: [EC2]
    _include:
      - csp/ec2
  - profiles: [GCE]
    _include:
      - csp/gce
archive:
  - name: root.tar.gz
    _include:
      - products/sles/ondemand
  - name: azure.tar.gz
    _include:
      - csp/azure
  - name: ec2.tar.gz
    _include:
      - csp/ec2
  - name: gce.tar.gz
    _include:
      - csp/gce
